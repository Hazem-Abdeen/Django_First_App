{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ product.title }}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'store/css/product_detail.css' %}">
  <link rel="stylesheet" href="{% static 'store/css/navbar.css' %}">

</head>

<body class="lux-body">

  {# If you already have a navbar include, use it. Otherwise keep your existing nav. #}
  {# {% include 'store/partials/navbar.html' %} #}

  {% include "store/navbar.html" %}


  <main class="lux-main">
    <!-- Back Button -->
    <div class="container lux-container mb-4">
      <a href="{% url 'home' %}" class="lux-back">
        <span class="lux-back-icon">←</span>
        <span class="lux-back-text">Back to Collection</span>
      </a>
    </div>

    <!-- Product Section -->
    <div class="container lux-container pb-5">
      <div class="row g-5 align-items-start">

        <!-- Image -->
        <div class="col-12 col-lg-6 d-flex justify-content-center">
          <div class="lux-image-wrap">
            <div class="lux-tag">
              {# You can replace this with product.tag if you add it to DB #}
              Featured
            </div>

            {% if product.image %}
              <img class="lux-image" src="{{ product.image.url }}" alt="{{ product.title }}">
            {% else %}
              <img class="lux-image" src="{% static 'store/img/placeholder.png' %}" alt="No image">
            {% endif %}
          </div>
        </div>

        <!-- Details -->
        <div class="col-12 col-lg-6">
            {% if request.user.is_staff %}
              <a href="{% url 'product-edit' product.id %}" class="btn btn-warning">
                Edit
              </a>
              {% endif %}
          <h1 class="lux-title">{{ product.title }}</h1>

          <!-- Rating (static placeholder like the React UI) -->
          <div class="lux-rating">
            <div class="lux-stars" aria-label="Rating">
              ★★★★★
            </div>
            <div class="lux-reviews">(120 reviews)</div>
          </div>

          <div class="lux-price">${{ product.unit_price }}</div>

          <p class="lux-desc">
            {{ product.description }}
          </p>

          <!-- Specifications (placeholders unless you add fields to model) -->
          <div class="lux-specs">
            <div class="lux-specs-title">Specifications</div>

            <div class="lux-specs-grid">
              <div class="lux-spec">
                <div class="lux-spec-label">Movement</div>
                <div class="lux-spec-value">Automatic</div>
              </div>

              <div class="lux-spec">
                <div class="lux-spec-label">Case Size</div>
                <div class="lux-spec-value">42mm</div>
              </div>

              <div class="lux-spec">
                <div class="lux-spec-label">Material</div>
                <div class="lux-spec-value">Stainless Steel</div>
              </div>

              <div class="lux-spec">
                <div class="lux-spec-label">Water Resistance</div>
                <div class="lux-spec-value">200m</div>
              </div>

              <div class="lux-spec">
                <div class="lux-spec-label">Warranty</div>
                <div class="lux-spec-value">2 years</div>
              </div>
            </div>
          </div>

          <!-- Add to Basket -->
          <div class="lux-cart">
            <form method="post" action="{% url 'cart-add' product.id %}" class="lux-cart-form">
              {% csrf_token %}

              <div class="lux-qty">
                <button type="button" class="lux-qty-btn" id="qtyMinus">−</button>
                <input
                  type="number"
                  name="quantity"
                  id="qtyInput"
                  value="1"
                  min="1"
                  class="lux-qty-input"
                />
                <button type="button" class="lux-qty-btn" id="qtyPlus">+</button>
              </div>

              <button type="submit" class="lux-add-btn">
                Add to Basket
              </button>
            </form>

            <div class="lux-note">Free shipping on orders over $500</div>
          </div>

          <!-- Trust badges -->
          <div class="lux-badges">
            <div class="lux-badge">
              <div class="lux-badge-icon">✓</div>
              <div class="lux-badge-text">Authentic</div>
            </div>
            <div class="lux-badge">
              <div class="lux-badge-icon">✓</div>
              <div class="lux-badge-text">Certified</div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </main>

  {# {% include 'store/partials/footer.html' %} #}

  <script>
    // Tiny replacement for React useState quantity +/- logic
    const input = document.getElementById("qtyInput");
    document.getElementById("qtyMinus").addEventListener("click", () => {
      const v = parseInt(input.value || "1", 10);
      input.value = Math.max(1, v - 1);
    });
    document.getElementById("qtyPlus").addEventListener("click", () => {
      const v = parseInt(input.value || "1", 10);
      input.value = v + 1;
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
